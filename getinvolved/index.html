<!DOCTYPE html>
<html lang="en">

<body>
    <div class="card">
        <h2>Comments</h2>
        <form>
            <div class="form-group">
                <label>Name</label>
                <input type="text" class="form-control" name="Name" />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="text" class="form-control" name="Email" />
            </div>
            <div class="form-group">
                <label>County</label>
                <select name="County" class="form-control">
                    <option>Bucks County</option>
                    <option>Burlington County</option>
                    <option>Camden County</option>
                    <option>Chester County</option>
                    <option>Delaware County</option>
                    <option>Gloucester County</option>
                    <option>Mercer County</option>
                    <option>Montgomery County</option>
                    <option>Philadelphia County</option>
                </select>
            </div>
            <div class="form-group">
                <label>Comments</label>
                <textarea class="form-control" name="Comments"></textarea>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" name="Mailing" value="Yes" class="form-control" /> Join Mailing
                    List</label>
            </div>
            <button type="submit" class="btn btn-primary">Send</button>
        </form>
    </div>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", async function () {
            var form = document.querySelector("form");
            form.addEventListener("submit", async function (e) {
                e.preventDefault();
                var data = new FormData(e.target);
                console.log(data)
                try {
                    var request = await fetch(
                        "https://staging.dvrpc.org/getinvolved/comment/save.aspx",
                        {
                            headers: {
                                "Content-Type": "application/x-www-form-urlencoded",
                            },
                            method: "POST",
                            body: new URLSearchParams({
                                County: data.get("County"),
                                Email: data.get("Email"),
                                Message: data.get("Comments"),
                                Name: data.get("Name"),
                                ReplyTo: data.get("email"),
                            }),
                        }
                    );
                    if (request.ok) {
                        form.reset();
                        window.alert(
                            "Your comment has been submitted. Thank you for the feedback!"
                        );
                    }
                } catch (err) {
                    console.error(err);
                }
            });
        });
    </script>
</body>

</html>